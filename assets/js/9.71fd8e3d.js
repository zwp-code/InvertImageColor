(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{408:function(s,t,a){"use strict";a.r(t);var n=a(56),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"nginx快速入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx快速入门"}},[s._v("#")]),s._v(" Nginx快速入门")]),s._v(" "),a("h2",{attrs:{id:"_1-nginx产生的原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-nginx产生的原因"}},[s._v("#")]),s._v(" 1.Nginx产生的原因")]),s._v(" "),a("p",[s._v("一个公司的项目刚刚上线的时候，并发量小，用户使用的少，所以在低并发的情况下，一个jar包启动应用就够了，然后内部tomcat返回内容给用户")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/c3f81b694d1448d09c372bc7f93f77a1.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-oyCWh5ol-1628237351424)(Nginx.assets/1628221226329.png)]"}})]),s._v(" "),a("p",[s._v("慢慢的，使用平台的用户越来越多了，并发量慢慢增大了，这时候一台服务器满足不了我们的需求了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/3532749669994c2db0d4f2f0aeb2815b.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-BQ7Is1Yt-1628237351429)(Nginx.assets/1628221258323.png)]"}})]),s._v(" "),a("p",[s._v("于是我们横向扩展，又增加了服务器。这个时候几个项目启动在不同的服务器上，用户要访问，就需要增加一个代理服务器了，通过代理服务器来帮我们转发和处理请求。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/39393db0ba6443d0b9a57113d75d3779.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hG0nVQU8-1628237351433)(Nginx.assets/1628221284447.png)]"}})]),s._v(" "),a("blockquote",[a("p",[s._v("我们希望这个"),a("strong",[s._v("代理服务器可以帮助我们接收用户的请求，然后将用户的请求按照规则帮我们转发到不同的服务器节点之上。这个过程用户是无感知的")]),s._v("，用户并不知道是哪个服务器返回的结果，我们还希望他可以"),a("strong",[s._v("按照服务器的性能提供不同的权重选择")]),s._v("。保证最佳体验！所以我们使用了Nginx。")])]),s._v(" "),a("h2",{attrs:{id:"_2-nginx简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-nginx简介"}},[s._v("#")]),s._v(" 2.Nginx简介")]),s._v(" "),a("h3",{attrs:{id:"_1-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[s._v("#")]),s._v(" （1）介绍")]),s._v(" "),a("p",[s._v("Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，第一个公开版本0.1.0发布于2004年10月4日。2011年6月1日，nginx 1.0.4发布。")]),s._v(" "),a("p",[s._v("其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。在全球活跃的网站中有12.18%的使用比率，大约为2220万个网站。")]),s._v(" "),a("p",[s._v("Nginx 是一个安装非常的简单、配置文件非常简洁（还能够支持perl语法）、Bug非常少的服务。Nginx 启动特别容易，并且几乎可以做到7*24不间断运行，即使运行数个月也不需要重新启动。你还能够不间断服务的情况下进行软件版本的升级。")]),s._v(" "),a("p",[s._v("Nginx代码完全用C语言从头写成。官方数据测试表明能够支持高达 50,000 个并发连接数的响应。")]),s._v(" "),a("h3",{attrs:{id:"_1-作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-作用"}},[s._v("#")]),s._v(" （1）作用")]),s._v(" "),a("p",[a("strong",[s._v("Http代理，反向代理：作为web服务器最常用的功能之一，尤其是反向代理。")])]),s._v(" "),a("ul",[a("li",[s._v("正向代理：代理是代理客户端的")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/d62e0a213b4841e08c83f7afdad41fff.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-pEhZ2NO8-1628237351438)(Nginx.assets/1628221458725.png)]"}})]),s._v(" "),a("ul",[a("li",[s._v("反向代理 ：代理是代理服务器的，所以用户是无感知的，比如，百度的服务器是在不同的服务器上，我们只需要搜索baidu.com就行。")]),s._v(" "),a("li",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/efbd618f4b904bf6a8d117a4fe2a4278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-gEQ62nTv-1628237351440)(Nginx.assets/1628221515354.png)]"}})])]),s._v(" "),a("p",[s._v("Nginx提供的负载均衡策略有2种：内置策略和扩展策略。内置策略为轮询，加权轮询，Ip hash。扩展策略")]),s._v(" "),a("ul",[a("li",[s._v("轮询")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/3d7c9116268e4706affd2591eedb59dd.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-U4cIH5FP-1628237351441)(Nginx.assets/1628221543126.png)]"}})]),s._v(" "),a("ul",[a("li",[s._v("加权轮询，因为可能不同服务器性能不一样，能接收的请求数量不同")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/0bbf581ed8144c4fbbe46f2ed894a213.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-qQpkwFEy-1628237351443)(Nginx.assets/1628221558749.png)]"}})]),s._v(" "),a("ul",[a("li",[s._v("iphash对客户端请求的ip进行hash操作，然后根据hash结果将同一个客户端ip的请求分发给同一台服务器进行处理，可以解决session不共享的问题。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/db239d9a10e147b5b8d50589e989c629.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-5FMkmlv2-1628237351443)(Nginx.assets/1628221600221.png)]"}})]),s._v(" "),a("ul",[a("li",[s._v("动静分离，在我们的软件开发中，有些请求是需要后台处理的，有些请求是不需要经过后台处理的（如：css、html、jpg、js等等文件），这些不需要经过后台处理的文件称为静态文件。让动态网站里的动态网页根据一定规则把不变的资源和经常变的资源区分开来，动静资源做好了拆分以后，我们就可以根据静态资源的特点将其做缓存操作。提高资源响应的速度。\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/163f19572b724b8ab0cacdf31e05ff0d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})])]),s._v(" "),a("h2",{attrs:{id:"_3-nginx的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx的安装"}},[s._v("#")]),s._v(" 3.Nginx的安装")]),s._v(" "),a("h3",{attrs:{id:"_1-windows下的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-windows下的安装"}},[s._v("#")]),s._v(" （1）Windows下的安装")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("下载")])])]),s._v(" "),a("p",[s._v("http://nginx.org/en/download.html 下载稳定版本")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/16a7e716fbb643aabd1342f76899c9f1.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),a("p",[s._v("解压到文件夹中")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/8c8ad3f916824b1a958f9ae44b44c5a5.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("启动Nginx")]),s._v("\n有很多种方法启动nginx")])]),s._v(" "),a("p",[s._v("(1)直接双击nginx.exe，双击后一个黑色的弹窗一闪而过")]),s._v(" "),a("p",[s._v("(2)打开cmd命令窗口，切换到nginx解压目录下，输入命令 nginx.exe ，回车即可")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("检查Nginx是否启动成功")])]),s._v(" "),a("p",[s._v("直接在浏览器地址栏输入网址 http://localhost:80 回车，出现以下页面说明启动成功")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/14e60387ead745abab1b2c6665ec8cb3.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("配置监听")])])]),s._v(" "),a("blockquote",[a("p",[s._v("nginx的配置文件是conf目录下的nginx.conf，默认配置的nginx监听的端口为80，如果80端口被占用可以修改为未被占用的端口即可。")]),s._v(" "),a("p",[s._v("当我们修改了nginx的配置文件nginx.conf 时，不需要关闭nginx后重新启动nginx，只需要执行命令 "),a("code",[s._v("nginx -s reload")]),s._v(" 即可让改动生效")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/98a3b98a9166458995cbff6d2ef1805b.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("关闭Nginx")])])]),s._v(" "),a("p",[s._v("如果使用cmd命令窗口启动nginx， 关闭cmd窗口是不能结束nginx进程的，可使用两种方法关闭nginx")]),s._v(" "),a("p",[s._v("(1)输入nginx命令 nginx -s stop(快速停止nginx) 或 nginx -s quit(完整有序的停止nginx)")]),s._v(" "),a("p",[s._v("(2)使用taskkill taskkill /f /t /im nginx.exe")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("taskkill是用来终止进程的，\n/f是强制终止 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n/t终止指定的进程和任何由此启动的子进程。\n/im示指定的进程名称 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2-linux下的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-linux下的安装"}},[s._v("#")]),s._v(" （2）Linux下的安装")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("要确定有gcc环境")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gcc -v  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果没有的话就安装一下")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("PCRE pcre-devel 安装")])]),s._v(" "),a("p",[s._v("PCRE(Perl Compatible Regular Expressions) 是一个Perl库，包括 perl 兼容的正则表达式库。nginx 的 http 模块使用 pcre 来解析正则表达式，所以需要在 linux 上安装 pcre 库，pcre-devel 是使用 pcre 开发的一个二次开发库。nginx也需要此库。命令：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y pcre pcre-devel\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("zlib 安装")])]),s._v(" "),a("p",[s._v("zlib 库提供了很多种压缩和解压缩的方式， nginx 使用 zlib 对 http 包的内容进行 gzip ，所以需要在 Centos 上安装 zlib 库。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y zlib zlib-devel\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("OpenSSL 安装")])]),s._v(" "),a("p",[s._v("OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及 SSL 协议，并提供丰富的应用程序供测试或其它目的使用。\nnginx 不仅支持 http 协议，还支持 https（即在ssl协议上传输http），所以需要在 Centos 安装 OpenSSL 库。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y openssl openssl-devel\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("下载安装包，并上传到linux上")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/5ebac34d428641fa817881b32b8fe82d.png",alt:"在这里插入图片描述"}})])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("解压安装包")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf nginx-1.20.1.tar.gz "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压安装包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.20.1/ "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入目录，发现和windows没什么区别")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("进行自动配置")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./configure\n")])])])]),s._v(" "),a("li",[a("p",[s._v("执行make命令")])]),s._v(" "),a("li",[a("p",[s._v("执行make install命令")])]),s._v(" "),a("li",[a("p",[s._v("查看是否安装成功")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@cVzhanshi nginx-1.20.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# whereis nginx")]),s._v("\nnginx: /usr/local/nginx\n")])])]),a("ul",[a("li",[a("p",[s._v("进入sbin目录，执行可执行文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/0a00fefa13154512a6c6b00b56d002fa.png",alt:"在这里插入图片描述"}})])]),s._v(" "),a("li",[a("p",[s._v("查看是否执行成功")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/2d325e988a7145228f11952fc6df713a.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ1NDA4Mzkw,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})])])]),s._v(" "),a("h2",{attrs:{id:"_4-nginx常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-nginx常用命令"}},[s._v("#")]),s._v(" 4.Nginx常用命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx/sbin/\n./nginx  启动\n./nginx -s stop  停止\n./nginx -s quit  安全退出\n./nginx -s reload  重新加载配置文件\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx  查看nginx进程\n")])])]),a("blockquote",[a("p",[s._v("注意：如何连接不上，检查阿里云安全组是否开放端口，或者服务器防火墙是否开放端口")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" firewalld start\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" firewalld restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" firewalld stop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙规则")]),s._v("\nfirewall-cmd --list-all\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询端口是否开放")]),s._v("\nfirewall-cmd --query-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放80端口")]),s._v("\nfirewall-cmd --permanent --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除端口")]),s._v("\nfirewall-cmd --permanent --remove-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启防火墙(修改配置后要重启防火墙)")]),s._v("\nfirewall-cmd --reload\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数解释")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、firwall-cmd：是Linux提供的操作firewall的一个工具；\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、--permanent：表示设置为持久；\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、--add-port：标识添加的端口；\n")])])]),a("h2",{attrs:{id:"_5-nginx文件配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-nginx文件配置"}},[s._v("#")]),s._v(" 5.Nginx文件配置")]),s._v(" "),a("h3",{attrs:{id:"_1-负载均衡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-负载均衡"}},[s._v("#")]),s._v(" （1）负载均衡")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("轮询")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("http "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\tupstream cvzhanshi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8082/ "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("weight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\tserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8081/ "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("weight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n    server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        server_name  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root   html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            index  index.html index.htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\tproxy_pass http://cvzhanshi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[a("p",[a("strong",[s._v("加权轮询")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("upstream bck_testing_01 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.220:8080   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("weight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.221:8080              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# default weight=1")]),s._v("\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.222:8080              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# default weight=1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("ip Hash")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("upstream bck_testing_01 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n \n  ip_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# with default weight for all (weight=1)")]),s._v("\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.220:8080\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.221:8080\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.222:8080\n \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("普通 Hash")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("upstream bck_testing_01 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n \n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# with default weight for all (weight=1)")]),s._v("\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.220:8080\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.221:8080\n  server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".250.222:8080\n \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_2-网站有多个-webapp-的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-网站有多个-webapp-的配置"}},[s._v("#")]),s._v(" （2）"),a("strong",[s._v("网站有多个 webapp 的配置")])]),s._v(" "),a("p",[s._v("当一个网站功能越来越丰富时，往往需要将一些功能相对独立的模块剥离出来，独立维护。这样的话，通常，会有多个 webapp。")]),s._v(" "),a("p",[s._v("举个例子：假如 www.helloworld.com 站点有好几个 webapp，finance（金融）、product（产品）、admin（用户中心）。访问这些应用的方式通过上下文(context)来进行区分:")]),s._v(" "),a("p",[s._v("www.helloworld.com/finance/")]),s._v(" "),a("p",[s._v("www.helloworld.com/product/")]),s._v(" "),a("p",[s._v("www.helloworld.com/admin/")]),s._v(" "),a("p",[s._v("我们知道，http 的默认端口号是 80，如果在一台服务器上同时启动这 3 个 webapp 应用，都用 80 端口，肯定是不成的。所以，这三个应用需要分别绑定不同的端口号。")]),s._v(" "),a("p",[s._v("那么，问题来了，用户在实际访问 www.helloworld.com 站点时，访问不同 webapp，总不会还带着对应的端口号去访问吧。所以，你再次需要用到反向代理来做处理。")]),s._v(" "),a("p",[s._v("配置也不难，来看看怎么做吧：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("http "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此处省略一些基本配置")]),s._v("\n \n    upstream product_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        server www.helloworld.com:8081"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n    upstream admin_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        server www.helloworld.com:8082"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n    upstream finance_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        server www.helloworld.com:8083"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n    server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#此处省略一些基本配置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认指向product的server")]),s._v("\n        location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            proxy_pass http://product_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n        location /product/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            proxy_pass http://product_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n        location /admin/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            proxy_pass http://admin_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n        location /finance/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            proxy_pass http://finance_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"_6-解决跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-解决跨域"}},[s._v("#")]),s._v(" 6.解决跨域")]),s._v(" "),a("p",[s._v("首先，在 enable-cors.conf 文件中设置 cors ：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# allow origin list")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ACAO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# set single origin")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_origin")]),s._v(" ~* "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www.helloworld.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ACAO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_origin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cors")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"trueget"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    add_header "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Origin'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$http_origin")]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    add_header "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Credentials'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    add_header "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Methods'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET, POST, OPTIONS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    add_header "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Access-Control-Allow-Headers'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_method")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'OPTIONS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cors")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${cors}")]),s._v('options"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_method")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'GET'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cors")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${cors}")]),s._v('get"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_method")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cors")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${cors}")]),s._v('post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("接下来，在你的服务器中 "),a("code",[s._v("include enable-cors.conf")]),s._v(" 来引入跨域配置：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ----------------------------------------------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此文件为项目 nginx 配置片段")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以直接在 nginx config 中 include（推荐）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者 copy 到现有 nginx 中，自行配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# www.helloworld.com 域名需配合 dns hosts 进行配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其中，api 开启了 cors，需配合本目录下另一份配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ----------------------------------------------------")]),s._v("\nupstream front_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  server www.helloworld.com:9000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nupstream api_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  server www.helloworld.com:8080"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  server_name  www.helloworld.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n  location ~ ^/api/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    include enable-cors.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_pass http://api_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    rewrite "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^/api/(.*)$"')]),s._v(" /"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n  location ~ ^/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy_pass http://front_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);